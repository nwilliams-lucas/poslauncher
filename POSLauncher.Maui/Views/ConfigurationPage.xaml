<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:POSLauncher.Maui.ViewModels"
             x:Class="POSLauncher.Maui.Views.ConfigurationPage"
             Title="Configuration"
             x:DataType="viewmodels:ConfigurationPageViewModel">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <Label Text="POS Launcher Configuration" Style="{StaticResource HeaderStyle}" />

            <!-- Commerce Client Configuration -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Spacing="15">
                    <Label Text="Commerce Client Application"
                           FontSize="18"
                           FontAttributes="Bold" />

                    <StackLayout>
                        <Label Text="Application Path:" />
                        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                            <Entry Grid.Column="0" 
                                   Text="{Binding ClientPath}"
                                   Placeholder="Path to Commerce_Client.exe"
                                   FontSize="14" />
                            <Button Grid.Column="1"
                                    Text="Browse"
                                    Command="{Binding BrowseCommand}"
                                    WidthRequest="80" />
                        </Grid>
                    </StackLayout>

                    <StackLayout>
                        <Label Text="Command Line Arguments:" />
                        <Entry Text="{Binding Arguments}"
                               Placeholder="--param1 value1 --param2 value2"
                               FontSize="14" />
                        <Label Text="Different machines may require different parameters. Configuration is stored locally."
                               FontSize="12"
                               TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                               Margin="0,5,0,0" />
                    </StackLayout>
                </StackLayout>
            </Frame>

            <!-- Service Configuration -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Spacing="15">
                    <Label Text="Service Configuration"
                           FontSize="18"
                           FontAttributes="Bold" />

                    <StackLayout Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding AutoStartOnBoot}" />
                        <Label Text="Enable automatic startup on boot"
                               VerticalOptions="Center" />
                    </StackLayout>

                    <StackLayout>
                        <Label Text="Service Start Timeout (seconds):" />
                        <Entry Text="{Binding ServiceTimeout}"
                               Keyboard="Numeric"
                               WidthRequest="100"
                               HorizontalOptions="Start" />
                    </StackLayout>
                </StackLayout>
            </Frame>

            <!-- UI Behavior Configuration -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Spacing="15">
                    <Label Text="Interface Behavior"
                           FontSize="18"
                           FontAttributes="Bold" />

                    <StackLayout Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding MinimizeOnComplete}" />
                        <Label Text="Minimize window after successful completion"
                               VerticalOptions="Center" />
                    </StackLayout>

                    <StackLayout Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding ShowStatusUpdates}" />
                        <Label Text="Show detailed status updates"
                               VerticalOptions="Center" />
                    </StackLayout>
                </StackLayout>
            </Frame>

            <!-- Information -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray800}}">
                <StackLayout>
                    <Label Text="Service Information"
                           FontSize="16"
                           FontAttributes="Bold"
                           Margin="0,0,0,10" />
                    
                    <Label Text="PostgreSQL: Automatically detects common PostgreSQL service names"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}" />
                    
                    <Label Text="JMC FIXED: Looks for service named 'fixed' with display name 'JMC FIXED'"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                           Margin="0,5,0,0" />
                    
                    <Label Text="Services are started in order: PostgreSQL first, then JMC FIXED, then Commerce_Client application."
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                           Margin="0,10,0,0" />
                    
                    <Label Text="The application will automatically try to find the Commerce_Client shortcut on the desktop to extract the path and parameters."
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                           Margin="0,10,0,0" />
                </StackLayout>
            </Frame>

            <!-- Save Button -->
            <Button Text="Save Configuration"
                    Command="{Binding SaveCommand}"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                    TextColor="White"
                    CornerRadius="8"
                    Padding="20,15"
                    FontSize="16"
                    FontAttributes="Bold"
                    HorizontalOptions="FillAndExpand"
                    Margin="0,20,0,0" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>