<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:POSLauncher.Maui.ViewModels"
             x:Class="POSLauncher.Maui.Views.MainPage"
             Title="POS Launcher"
             x:DataType="viewmodels:MainPageViewModel">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">
            
            <!-- Banner Logo -->
            <Image Source="banner_logo.svg"
                   HeightRequest="100"
                   HorizontalOptions="FillAndExpand"
                   Aspect="AspectFit"
                   Margin="0,0,0,10" />

            <!-- Main Status -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout>
                    <Label Style="{StaticResource HeaderStyle}" Text="System Status" />
                    <Label Text="{Binding StatusMessage}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}"
                           HorizontalOptions="Center" />
                    
                    <!-- Loading indicator -->
                    <ActivityIndicator IsVisible="{Binding IsLaunching}"
                                       IsRunning="{Binding IsLaunching}"
                                       Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}"
                                       Margin="0,10,0,0" />
                </StackLayout>
            </Frame>

            <!-- Service Status Section -->
            <Label Text="Service Status" Style="{StaticResource HeaderStyle}" />

            <!-- PostgreSQL Status -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Orientation="Horizontal">
                    <Ellipse Fill="{Binding PostgresStatus, Converter={StaticResource StatusToColorConverter}}"
                             WidthRequest="12"
                             HeightRequest="12"
                             VerticalOptions="Center"
                             Margin="0,0,10,0" />
                    <Label Text="{Binding PostgresStatus}"
                           Style="{StaticResource StatusTextStyle}"
                           VerticalOptions="Center"
                           LineBreakMode="WordWrap" />
                </StackLayout>
            </Frame>

            <!-- JMC FIXED Status -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Orientation="Horizontal">
                    <Ellipse Fill="{Binding FixedServiceStatus, Converter={StaticResource StatusToColorConverter}}"
                             WidthRequest="12"
                             HeightRequest="12"
                             VerticalOptions="Center"
                             Margin="0,0,10,0" />
                    <Label Text="{Binding FixedServiceStatus}"
                           Style="{StaticResource StatusTextStyle}"
                           VerticalOptions="Center"
                           LineBreakMode="WordWrap" />
                </StackLayout>
            </Frame>

            <!-- Application Launch Section -->
            <Label Text="Application Launch" Style="{StaticResource HeaderStyle}" />

            <!-- Commerce Client Status -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Orientation="Horizontal">
                    <Ellipse Fill="{Binding CommerceClientStatus, Converter={StaticResource StatusToColorConverter}}"
                             WidthRequest="12"
                             HeightRequest="12"
                             VerticalOptions="Center"
                             Margin="0,0,10,0" />
                    <Label Text="{Binding CommerceClientStatus}"
                           Style="{StaticResource StatusTextStyle}"
                           VerticalOptions="Center"
                           LineBreakMode="WordWrap" />
                </StackLayout>
            </Frame>

            <!-- Startup Configuration Section -->
            <Label Text="Startup Configuration" Style="{StaticResource HeaderStyle}" />

            <!-- Startup Status -->
            <Frame Style="{StaticResource StatusCardStyle}">
                <StackLayout Orientation="Horizontal">
                    <Ellipse Fill="{Binding StartupStatus, Converter={StaticResource StatusToColorConverter}}"
                             WidthRequest="12"
                             HeightRequest="12"
                             VerticalOptions="Center"
                             Margin="0,0,10,0" />
                    <Label Text="{Binding StartupStatus}"
                           Style="{StaticResource StatusTextStyle}"
                           VerticalOptions="Center"
                           LineBreakMode="WordWrap" />
                </StackLayout>
            </Frame>

            <!-- Action Buttons -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10" Margin="0,20,0,0">
                <Button Text="Retry All"
                        Command="{Binding RetryCommand}"
                        IsEnabled="{Binding IsRetryEnabled}"
                        BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                        TextColor="White"
                        CornerRadius="8"
                        Padding="20,10" />
                
                <Button Text="Configure"
                        Command="{Binding ConfigureCommand}"
                        BackgroundColor="{AppThemeBinding Light={StaticResource Secondary}, Dark={StaticResource Secondary}}"
                        TextColor="White"
                        CornerRadius="8"
                        Padding="20,10" />
            </StackLayout>

            <!-- Information Section -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray800}}"
                   Margin="0,20,0,0">
                <StackLayout>
                    <Label Text="Information"
                           FontSize="18"
                           FontAttributes="Bold"
                           Margin="0,0,0,10" />
                    <Label Text="This application automatically manages Windows services required for your POS system:"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}" />
                    <Label Text="• PostgreSQL Database Server"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                           Margin="10,5,0,0" />
                    <Label Text="• JMC FIXED Service"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                           Margin="10,0,0,0" />
                    <Label Text="• Commerce_Client Application"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                           Margin="10,0,0,5" />
                </StackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>